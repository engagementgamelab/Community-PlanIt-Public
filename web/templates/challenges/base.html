{% extends "base_game.html" %}
{% load i18n %}


{% block js %}
    {{ block.super }}
    {% comment %}
    DO NOT DELETE, temp commented
    {# masonry is required to display comments correctly #}
    <script src="{{ STATIC_URL }}js/jquery.masonry.min.js"></script>
    <script src="{{ STATIC_URL }}js/sijax.js"></script>
    <script src="{{ STATIC_URL }}js/comments.js"></script>
    
    {# TODO: Move this to activities/static/activities/js/scripts.js #}
    <script>
    jQuery(function($) {
        
        {# include "js/ajax_csrf.html" #}
        /* Summary Graph */
        /* calculate total */
        var activity_response_total = 0;
        $('.activity-response-summary-choice-percentage').each(function(index){
            activity_response_total += parseInt($(this).attr('data-summary-count'));
        });
        
        /* calculate percentages and animate */
        $('.activity-response-summary-choice-percentage').each(function(index){
            var activity_response_percentage = Math.round((parseInt($(this).attr('data-summary-count'))/activity_response_total)*100);
            $(this).animate({
                width: activity_response_percentage+'%'
            }, 2000);
        });
      {{ create_comment_sijax_js|safe }}
        
    });
    </script>
    {% endcomment %}
{% endblock %}


{% block content %}
<div class="wrapper">
    <h1>{{ mission }}</h1>

    <div class="minimap">
        {% for challenge in challenges %}
            <div class="challenge {% if forloop.last %}challenge-final{% endif %} {% if forloop.counter|divisibleby:4 %}challenge-barrier{% endif %} {% if forloop.counter > 4 %}challenge-locked{% endif %}">
                {# Examples #}
                {% if forloop.first %}
                    <i class="icon-user"></i>
                {% endif %}
                {% if forloop.last %}
                    <i class="icon-flag"></i>
                {% elif forloop.counter|divisibleby:4 %}
                    <i class="glyphicon-flash"></i>
                {% elif forloop.counter > 4 %}
                    <i class="icon-lock"></i>
                {% endif %}
            </div>
        {% endfor %}
        <span class="badge">{{ mission.title }}</span>
        <div class="window"></div>
    </div>
</div>
{% endblock %}