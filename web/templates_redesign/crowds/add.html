{% extends 'crowds/all.html' %}
{% load gmap game_extras i18n %}

{% block js %}
    {{ block.super }}
    <script src="https://maps.google.com/maps/api/js?sensor=false&amp;libraries=places"></script>
    <script type="text/javascript" src="/admin/gmapsfield/admin/admin.js"></script>
    <script src="{{ STATIC_URL }}js/date.js" type="text/javascript" charset="utf-8"></script>
    <script src="{{ STATIC_URL }}js/mapit.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        jQuery(function($) {
            $(".map").mapit({{ map|safe|escape }});
            $(".remove-map").remove();
        });
    </script>
    <script>
        $(document).ready(function(){
            //$(".add-map, .remove-map").remove();
            
            $("#id_start_date_0").datepicker();
            $("#id_start_date_1").timepicker({
                hourGrid: 6,
                minuteGrid: 15,
                ampm: true,
                timeFormat: "hh:mm TT"
            });
            
            $("#id_end_date_0").datepicker();
            $("#id_end_date_1").timepicker({
                hourGrid: 6,
                minuteGrid: 15,
                ampm: true,
                timeFormat: "hh:mm TT"
            });
            
        });
    </script>
{% endblock %}

{% block no_gettogethers %}{% endblock %}

{% block crowds_add %}
    <a href="{% url crowds:index %}" class="btn-yellow active">{% trans "- Create a Get Together!" %}</a>

<div>


    <div id="crowds-addform">
        
        {% if form.errors or form.non_field_errors %}
        <div id="form_errors" class="error">
            {% trans "Please correct the errors below." %}
            {{form.non_field_errors.as_ul}}
            {{ form.errors }}
        </div>
        {% endif %}
        
        <form class="column-container" action="" method="POST"> 
            {% csrf_token %}
            {% comment %}
            <input type="hidden" class="defaults" value='{"zoom": 14, "coordinates": {{location}} }'>
            {% endcomment %}
            <input type="hidden" name="form" value="map">
            <input type="hidden" id="max_points_input" name="max_points_input" value="1">

            <p>
                {{form.name.label_tag}}
                {{form.name}}
                {{form.name.errors}}
            </p>

            <p>
                {{form.description.label_tag}}
                <div class="help">
                    {{form.description.help_text}}
                </div>
                {{form.description}}
                {# <div class="fine counter">(<span class="count">1000</span> {% trans "characters left" %})</div> #}
                {{form.description.errors}}
            </p>


            <div class="map-controls">
                 <label> Address </label> 
                 <input type="text" name="google_search" id="google_search" />
                 {# placeholder="Search for a company or an address" #}
                
                {# <button class="btn-blue add">Add Point</button> #}
                {# <button class="btn-blue rm">Clear All Points</button> #}
                
            </div>
            
            <div id="crowds-addform-location">
                <div class="column-half">
                    <p id="crowds-addform-map-container">
                        {{ form.map.errors }}
                        {# {{form.map.label_tag}} #}
                        {{ form.map }}
                        {# <div id="map" class="google-map" data-type="Point"></div> #}
                        
                    </p>
                </div>
            
                <div class="column-half">
                    <div>
                        {{ form.start_date.label_tag }}
                        {{ form.start_date }}
                        {{ form.start_date.errors }}
                    </div>
                    <p>
                        {{form.end_date.label_tag}}
                        {{form.end_date}}
                        {{form.end_date.errors}}
                    </p>
                </div>
            </div>

            <div class="controls clearfix">
                <input type="submit" class="button submit" value="{% trans "Get Together!" %}">
            </div>
        </form>
    </div>
</div>
{% endblock %}
