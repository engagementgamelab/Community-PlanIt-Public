{% extends 'crowds/all.html' %}
{% load game_extras i18n %}

{% block js %}
    {{ block.super }}
    <script src="https://maps.google.com/maps/api/js?sensor=false&amp;libraries=places"></script>
    <script type="text/javascript" src="/admin/gmapsfield/admin/admin.js"></script>
    <script src="{{ STATIC_URL }}js/date.js" type="text/javascript" charset="utf-8"></script>
    <script>
        $(document).ready(function(){
            $(".add-map, .remove-map").remove();
            
            $("#id_start_date_0").datepicker();
            $("#id_start_date_1").timepicker({
                hourGrid: 6,
                minuteGrid: 15,
                ampm: true,
                timeFormat: "hh:mm TT"
            });
            
            $("#id_end_date_0").datepicker();
            $("#id_end_date_1").timepicker({
                hourGrid: 6,
                minuteGrid: 15,
                ampm: true,
                timeFormat: "hh:mm TT"
            });
            
        });
    </script>
{% endblock %}


{% block crowds_add %}
<div class="tabbutton">
    <a href="{% url crowds:index %}" class="button">{% trans "- Create a Get Together!" %}</a>
</div>

<div>


    <div id="crowds-addform">
        
        {% if form.errors or form.non_field_errors %}
        <div id="form_errors" class="error">
            {% trans "Please correct the errors below." %}
            {{form.non_field_errors.as_ul}}
        </div>
        {% endif %}
        
        <form class="column-container" action="" method="POST"> 
            {% csrf_token %}
            <input type="hidden" class="defaults" value='{"zoom": 14, "coordinates": {{location}} }'>

            <p>
                {{form.name.label_tag}}
                {{form.name}}
                {{form.name.errors}}
            </p>

            <p>
                {{form.description.label_tag}}
                <div class="help">
                    {{form.description.help_text}}
                </div>
                {{form.description}}
                {# <div class="fine counter">(<span class="count">1000</span> {% trans "characters left" %})</div> #}
                {{form.description.errors}}
            </p>
            
            <div id="crowds-addform-location">
                <div class="column-half">
                    <p id="crowds-addform-map-container">
                        {# {{form.map.label_tag}} #}
                        {{form.map}}
                        {{form.map.errors}}
                    </p>
                </div>
            
                <div class="column-half">
                    <div>
                        {{ form.start_date.label_tag }}
                        {{ form.start_date }}
                        {{ form.start_date.errors }}
                    </div>
                    <p>
                        {{form.end_date.label_tag}}
                        {{form.end_date}}
                        {{form.end_date.errors}}
                    </p>
                </div>
            </div>

            <div class="controls clearfix">
                <input type="submit" class="button submit" value="{% trans "Get Together!" %}">
            </div>
        </form>
    </div>
</div>
{% endblock %}
