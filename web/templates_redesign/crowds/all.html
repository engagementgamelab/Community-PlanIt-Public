{% extends 'crowds/base.html' %}
{% load game_extras i18n %}

{% block body_id %}crowds-index{% endblock %}

{% block game_content %}
<div class="column-full">
    <div class="column-container">
    <h1>{% trans "Get Together!" %}</h1>
    <p class="instructions">{% trans "Get together with your fellow players to organize, rally, and take action at physical meet-ups in your community!" %}</p>
    
    {% block crowds_add %}
        <div class="tabbutton">
            <a href="{% url crowds:rally %}" class="button">{% trans "+ Create a Get Together!" %}</a>
        </div>
    {% endblock %}
    
    
        {% for crowd in crowds %}
            {% ifchanged %}
                <hr class="thick" />
                <h2>{{ crowd.start_date|date:"m/d/Y"}}</h2>
            
            {% endifchanged %}
            <a href="{% url crowds:view crowd.pk %}" class="crowds-event">
                <div class="crowds-event-left">
                    <div class="crowds-event-name">{{ crowd.name}}</div>
                    {% if request.user in crowd.participants.all %}<div class="crowds-event-attending"></div>{% endif %}
                    <div class="crowds-event-participants">({{ crowd.participants.all.count }} {% trans "players attending" %})</div>
                    <div class="crowds-event-creator">{% trans "created by" %} {{ crowd.creator.get_profile.screen_name }}</div>
                </div>
                <div class="crowds-event-right">
                    <div class="crowds-event-time">{{ crowd.start_date|time:"g:i A" }} - {{ crowd.end_date|time:"g:i A" }}</div>
                </div>
            </a>
        {% empty %}
            {% trans "There are no crowds" %}
        {% endfor %}
        
        <hr class="thick" />

    </ul>
    </div>
</div>
{% endblock %}