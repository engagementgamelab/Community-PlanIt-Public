{% extends 'crowds/base.html' %}
{% load game_extras i18n %}

{% block game_content %}
<div class="column-full">
    <div class="column-container">
    <h1>Get Together!</h1>
    <p class="instructions">Create or attend a Get Together. It allows you to interact face to face with the people who are also helping to build your community's future.</p>
    
    {% block crowds_add %}
        <div class="tabbutton">
            <a href="{% url crowds:rally %}" class="button">{% trans "+ Create a Get Together!" %}</a>
        </div>
    {% endblock %}
    
    
        {% for crowd in upcoming %}
            {% ifchanged %}
                <hr class="thick" />
                <h2>{{ crowd.start_date|date:"m/d/Y"}}</h2>
            
            {% endifchanged %}
            <div class="crowds-event">
                <div class="crowds-event-time">
                    {% if crowd.start_date %}
                        {{ crowd.start_date|time:"g:i A" }}
                    {% endif %}
                </div>
                <div class="crowds-event-name">{{ crowd.name}} ({{ crowd.participants.all.count }} {% trans "Participants" %})</div>
            </div>
        {% empty %}
            {% trans "There are no active crowds" %}
        {% endfor %}


        {% for crowd in past %}
            {% ifchanged %}
                <hr class="thick" />
                <h2>{{ crowd.start_date|date:"m/d/Y"}}</h2>
            
            {% endifchanged %}
            <div class="crowds-event">
                <div class="crowds-event-time">
                    {% if crowd.start_date %}
                        {{ crowd.start_date|time:"g:i A" }}
                    {% endif %}
                </div>
                <div class="crowds-event-name">{{ crowd.name}} ({{ crowd.participants.all.count }} {% trans "Participants" %})</div>
            </div>
        {% empty %}
            {% trans "There are no past crowds" %}
        {% endfor %}
        
        <hr class="thick" />

    </ul>
    </div>
</div>
{% endblock %}